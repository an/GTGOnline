{% extends 'topbar.html' %}

{% block sidebar %}
    <div style="position: fixed; min-width: 100px;" id="sidebar">
        <div class="section sidebar" style="position: relative">
			<button class="modern" id="showhide" style="width: 85%" data-bind="click: $root.new_task.bind($data, -1)">
				<span>New Task</span>
			</button>
            <div class="widget">
				<div class="widget-header" style="margin-bottom: 0px">
						<h3 class="light">Tasks</h3>
                </div>
                <div class="widget-content" style="padding: 0px" id="task_folders">
                    <!--<ul class="unstyled user-list clearfix">-->
                    <ul class="nav nav-list" data-bind="foreach: folders">
                        <li data-bind="css: { active: $data == $root.chosenFolderId() }, click: $root.goToFolder">
							<a href="#">
								<span data-bind="text: $data"></span>
								<span class="pull-right label"></span>
							</a>
						</li>
                    </ul>
                </div>
            </div>
            <div class="widget bg-color blue">
                <div class="widget-header">
                	<h3>Tags</h3>
                </div>
                <div class="widget-content" data-bind="foreach: tags_list" id="sidebar_tags_list" style="padding: 5px 15px">
					<a href="#" style="text-decoration: none;" class="dropdown-toggle" data-toggle="dropdown">
						<span class="label" data-bind="text: name, style: { backgroundColor: color }, attr: { 'id': id }"></span>
					</a>
					<ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
						<li><a href="#"><i class="icon-wrench"></i>&nbsp;Edit</a></li>
						<li><a href="#"><i class="icon-trash"></i>&nbsp;Delete</a></li>
					</ul>
                </div>
            </div>
            <div class="widget bg-color dark-grey">
            	<div class="widget-header" style="margin-bottom: 0px">
            		<h3>Due Dates</h3>
            	</div>
            	<div class="widget-content" style="padding: 0px">
            		<ul class="nav nav-list">
                        <li>
							<a href="#">
								<span>Due Today</span>
								<span class="pull-right label">3</span>
							</a>
						</li>
						<li>
							<a href="#">
								<span>Due Week</span>
								<span class="pull-right label">9</span>
							</a>
						</li>
						<!--<li>
							<a href="#" data-bind="text: ko.toJSON($root.modify_selected)">
							</a>
						</li>-->
                    </ul>
            	</div>
            </div>
        </div>
    </div>
{% endblock sidebar %}

{% block new_task_modal %}
<div id="new_task_modal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="width: 500px; margin-left: -250px">
	<div class="modal-header" id="new_task_name_field" style="padding: 10px">
		<input type="text" placeholder="Task Name" style="margin: 0px" class="input-task-name" data-bind="value: task_name_field, valueUpdate: 'afterkeydown'">
		<p>You have typed: <span data-bind="text: task_name_field"></span></p>
	</div>
	<div class="modal-body" style="padding: 10px;">
		<textarea rows="10" placeholder="Task Description" class="input-task-name" style="margin: 0px; margin-bottom: 10px;"></textarea>
		<input size="16" type="text" readonly class="new_task_datepicker pull-left" id="start_date_field">
		<input size="16" type="text" readonly class="new_task_datepicker pull-right" id="due_date_field">
	</div>
	<div class="modal-footer">
		<button class="btn" data-dismiss="modal" aria-hidden="true">Hide</button>
		<button class="btn btn-primary">Create</button>
	</div>
</div>
{% endblock new_task_modal %}

{% block external_js %}
{{ block.super }}

<script type="text/javascript" src="{{ STATIC_URL }}js/data/tags.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/data/sidebar.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/data/sammy.js"></script>
<script type="text/javascript" src="{{ STATIC_URL }}js/datetimepicker/bootstrap-datetimepicker.js"></script>

<script type="text/javascript">
	$("#start_date_field").datetimepicker({
		format: 'dd/mm/yy',
		minView: 2,
		maxView: 3,
		todayHighlight: true,
		todayBtn: true,
		autoclose: true,
	});
	$("#due_date_field").datetimepicker({
		format: 'dd/mm/yy',
		minView: 2,
		maxView: 3,
		todayHighlight: true,
		todayBtn: true,
		autoclose: true,
		//startDate: get_date_object($('#start_date_field').val()),
	});
	//alert($('#start_date_field').val());
</script>

<script type="text/javascript">
	$(document).ready(function(){
		//get_tags_by_user();
		ko.applyBindings(new TaskFoldersViewModel(), document.getElementById("wrapper"));
		//get_todays_date();
		//ko.applyBindings(new TaskFoldersViewModel(), document.getElementById("task_rows_container"));
	});
</script>

{% endblock external_js %}
